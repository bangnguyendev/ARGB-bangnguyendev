<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
<link rel="shortcut icon" href="data:image/x-icon;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA52zLQOZty8oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADkbcgc5WzKdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAADAAAABgAAAAAQAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wNAAP8EKgD/BhwA/wkkEv8OGCT/FRMv/xsIS/8iB2X/JgB2/ykAhv8qAJv/KQCz/ygAv/8oANj/JwDe/ycH6/8nDfLyJw343SYb/7UmKP+NJjb/XiZK/zwmXv8oJnL/GyaN/xsmrv8UJtD4FCbr+BQm+OsUJ//lFCf5zBoo+aYmKPl8MinzT0Mq7SRNK+gMVyztAF8r7ABgKOkAXyPrAFga4QBaEeMAVQn/AFUDAAAAAAAAAAAAAAAAAAAAADMA/wonAP8NKgD/EioL/xggGP8gGSz/KRBE/zEEVf85BGv/PgB9/z8AkP8+AKP/PQCw/z0Aw/88ANT/PATl/zoJ7f86CfLyOhL72zkf+7M5Lf+GOTr/XjlI/zo5YP8pOHD/HzmP/xs5rv8WOcn7Ejnk9hI58u0SOvvhFjv/zxY7+64iPPeELT73VkI+8zBMQO8QVkHsAF1C5wBeQekAXDrpAF4u4QBaIuYAWRTjAFUJ/wCAAgAAAAAAAAAAAAAAADIA/yQxAP8qLgX/MiYR/zwdIf9GFzT/TgxL/1UDX/9bAHP/XQCE/1sAl/9YAKn/VgC5/1QAyP9TA9f/UgPj/1EG7PxQDfLvTxT41E4h/K1OK/+ETTz/XU1M/zxNXf8oTXT/Hk2O/xpNqf8XTcf8FE3i9RRO8u8TT/zmE1D80BZS/LUcU/mMKlT5YzxV8ztJV/EaVlnsBl5c7ABhXOoAYVfrAF9L5gBdPOcAYSrgAFwZ0QBdC/8AgAIAAAAAAAAAADUA/zoxB/9JLBH/XCQi/3IZMv+FD0T/lghY/6IDa/2nAHz/pQCO/54An/+XAK7/kQC9/4wCzv+HAtr/gwTl/38I7/t8DfLqehX2zngg+6t2Lv2BdTv/WnRL/Tt0W/8oc3D9IXSK/Rp0pvsYdcL5Fnbd9hN38O4VefvmFXz/2RR+/b4cgfubKYT5cTeH9kpFifQnU4vwDVuM7QJhi+oAYYTpAGB15wBgYOcAXknlAFwy5QBYHesAYg3/AFUDAAAAADEH/0ktEf9bJB7/cB0u/4YSPv+cClP/rwVj/r8Bdf/HAIX/ygCU/8kApP/HALT/xQHE/8MB0P7CA97/vwfo/70K7/i7D/XouRj4ybgi+6S2Lvx9tT3+WLRL/jq0XPwotHD+H7SJ/hu0pfwZtcD7FrbZ9xW37fATufroFLv+3Ra8/scavvumJL/6fjK+9lg/vfMzTbrwF1e17QZerusAYKTpAF+U6QBhfuYAXWXkAF5M5gBfM+YAXR7tAFsO/wBABCoM/1UnG/9pHCj/fhY7/5QOTP+oB17/uQNu/8UAff/KAI3/ywCc/8sAq//LALr/ywHI/8sD1P/LBOD/ywbo/MsK8PbLEPXiyxn3xMsj+6DLMPx5yj7+VcpM/jnKXP4nym/+IMqH/hzKovwYyrz5F8vW9hXL6vEVy/fqFcv84BXL/M0Yy/uvIcr5ii7J9mU7yPVASMTzIVS/7QtbuewBX7HrAGCk6ABgkugAX3vjAF1j4wBdSuEAXzPeAFofzABVDyUa/1ofJv9rGDT/fxBG/5IJWP+mBGj/tgF3/sEAhf/FAJP/xwCh/8kAsP/JAL//ygHL/8oD2P/LBeL/ywnq+Mwc58TTNN+C3jvfad9C3lPhSd484k7jMN5P+TTOXP4ny2/+IcuF/BzLoPwZy7r6F8vT9hXL5/EVy/XrFcv74hXL/tIXy/u4Hsr6lyrJ+XM2x/ZOQsTzLlDA8RVZuu4EXrXsAGCs6gBgoOgAX47lAF535wBeX+IAW0beAFwv4wBVGx4h/1QZMv9mEUD/dwtR/4gFYP+YAm//pQB//60AjP+zAJn/twCo/7sAtf++AcL+wQPQ/8MD3P/EBeT+xiDfuNRZxBr4Y78A/2O/AP9jvwD/Y78A/2HEBPpW7SXVXf4nyW7+IcmE/B3JnfwZybj8F8jQ+RbI5fQUyPXuFcf75BXH/tgWxfzBG8T7oibC+n8xv/ZcPr30Okq58R5Wte8KXbDsAWCs6wBgpekAYJfmAF+D5QBfa+YAXFDkAFs44gBfIxgt/0kUOf9aDEv/agZa/3oEaf+GAHf/kACE/5cAkv2dAKD/oQCu/6YAuv+qAcf/rQHS/rED3v+zBuf/tkDQX99jvwD/RdVS3TjjbtA/5VnQRuZF0EvsN8xP+jTBXP4ov1Sre9VDXM/wbJ2E2rL2Hb/N+Ba94vUWu/HvFrr75hW5/twVtv7JGrT8rCKy+4ovr/ZoOa72Rkaq8ylQqPETWqXuBV6i7ABgneoAYZHpAGB96ABgZeUAXU3kAFs45ABeJhc2/0IQRP9PCFX/XQVj/2oAcP90AID/fACK/4EAl/+HAKT/jACz/5AAv/+UAs3/mALY/5sD4P+eBun/oVPILudgwgj5Ju2ktB76sqkq/JCqNP5tq0H+TaxO/DitVNhNuTM88vkxMf//MTH//1lrvN/K+RWp3/QVqPDwFKb66RSk/eAUov3OGKD8tCCf+pQpnfhzNZv3UkGY8zNNlfEaVpHtCVyN7ABfhuoAYHrqAF9r6ABfWeYAX0bjAF423wBZKBBA/0AKT/9KBlv/VANo/10AeP9kAIT/agCR/28AnP90AKr/eAC2/30Axf+AAs//hATa/4gE4v+LDufok1/BCflaxhnpI+2qnx/8sJUp/IyXM7+arziQrMc9hK7NNk7h6zEx//8xMf//MTH//1hsu9PH+BaW3fYVlO7xE5L46hOQ/eIUjv3SFo37ux2L+Zwnifd+MYb3Xj2C9T9HffQkU3jvEFlz7AJebe0AYGXsAGFc6QBeUegAXkTjAF034QBfKxBG/z4LVP9GA2T/TwNy/1UAff9aAIn/XQCX/2AAov9jAK3/ZwC4/2wAxv9vAtT/cgLc/3YE5v94MtWEpGO/AP9RzDHPHvW5hiH7q4IsxKuYMUfw6jI1/PwxMv3+MTH//zEx//8xMf//MTH//3CTja/F+RWD2fcUge3zFH/37RR9/eYTe//XFXn9wxp3/acjdPqKLXH2aTht9UlEafIuT2TyGFhg7wVdXesAXlrqAGBV6ABgTegAX0PoAF034gBdLA1O/zsEW/9DA2n/SQB0/08Agf9TAJD/VQCb/1cAp/9aALT/XAC+/14Azf9gA9X/YgPe/2UK5/hpU8crzmK/A/tF1VGqF/rGcCL6qXEtqrqTMTr68TEx//8xMf//MTH//zEx//8xMf//MTH//09hx8e46id32PYUcOj0FW/z7BVt/ecWav/dFmj8yBlm/K8fY/ySKmD3cjZe9FZAXPQ2SlrwHVVX8wxbVO8DYFLrAGJO6gBjSOsAYEDoAF036ABdLAlX/zgEY/8+BG7/QwB8/0gAiP9LAJP/TgCd/1EAqf9TALn/VADB/1cAzv9YA9r/WQPg/1sm2aR4X8EL7V/BCu4x4YZ+GvrBYiH6omMt5ZFrM27SqzRM5s80R+nYMjn27zEx//8xMf//MTH//zQ2+fdidLGpyeYoZ+X0EmHy7BNg+ucTXvzeFl3/zRZb/LUfWvyaJlj5fTJW9l08VfZBSFLyJlBQ7xBYTu4DXEvtAGBI7ABiROYAXz7sAFs16ABdLAVf/zMEa/85AHX/PwCB/0MAjP9FAJr/RwCk/0kArv9MALr/TgDI/08D0/9RA9r/Uwbk/FVHy0qhY78C+1jGHs0W9M9bGvm9WSL8n1ot/IBaNvRqXj7cZmZJ019pUMJrcEFqwqgzNfr0MTH//zEx//80Nfr2UFXUv2NovapKSeDOVFDWwPzeGFb/1BhU/L4cU/miJVL5hjBQ9Wk4TvJKQ0zxMExK8RlWR/QIWkTsAF1C6wBdP+kAYTrrAGEy7ABkKQZe/y4Abv8zAHv/OACI/zwAkv8/AJ3/QQCl/0QAs/9GAL7/RwDH/0kD0/9LA93/TBzbxVxawxjRY8AB/T3XaYET+dNSHPm4Uyr2llVpq0V6Yr07cEX8RVVtxCNshqYSfmr2I1dSjZyGNDr16jEx//8xMf//MTH//zEx//8xMf//MTH//4h9moP/1BdO/MMbTPyqIkv4jy1J+HM2R/hVQ0X0OUhD8x9OQe8QWT/uBF087QBeOesAXTTpAF4u6wBlJgBm/ygAd/8tAID/MgCM/zUAlv84AKD/OwCw/z0At/9AAMH/QgTO/0ME2v9EBN7/Rj3OaH1ivwP4XcMT1BTy3k0U+NNLG/y1TD7XelqfXA/MpVUG4ZV0D6mjXAXTq0wA93DzH1J7/B1PV4aggTM0+/UxMf//MTH//zEx//8xMf//MTH//1BM27j/1xZH+8gaRvuxIUX7lCpD83gyQvdcPED3Q0c98idOO/EXVzjxCls18ABcMukAXi7mAGQp6ABiIgBw/yIAfP8nAIL/KwCQ/y4AnP8xAKf/NACz/zYAvP85AMf/OwDR/z0E1/8/BOP/QFzBE9NivwH8QdNgeg/05UUZ9MlHLuWfTWalT26oUATrqk4C8KRZBs+qUQLqrEsA/ZWPDIJ+/BxJjPgjSUdbz6YxMf//MTH//zEx//8xMf//PDvy3JiJjGr/3BdC/8wYQfu2HD/7nyY9+4IwO/ZiOjn2SkY39TFONPUaUzHvC1cv7QBfK+sAYifpAF8j7QBhHQBq/x0AfP8hAIP/JQCW/ycAnv8qAKb/LgC4/y8Avf8yAMn/NADU/zYF2/84Q8tZdmO/AP9cwxTLIeWzTRD34z9wj1R0qk8E7KxLAfqfXwy/VtZDUEb/QkJh4ShMoGUGtK1LAPysTAD0n5sLcHOmeV8yNPvzMTH//zEx//5HR+S8y8RBSvviFT7/3RU8/9MWOv+8Gzn6oiU3/4kxNPpwODL0VUAw9DlKLfMeUyvyDVko8QdcJPAAXSHmAF0e6wBYGgB6/xcAif8aAJD/HgCT/yEAoP8jAK7/JgC0/ykAxP8rAMz/LQDP/zAO1Oc2XMISxWLAAvdNyzqIDfLkORL22zlTsnhTolgOyKpPAu14mjFoO/9ZPEj/RDxR/y88bNsgR6tOAeqqVQHTmbAOWnu6aFE3O/PbMTH//zMz/fZmaL+A8e0SOPrsEzb/4hM1/9MUNP/CGTL/qiAw+ZAnLvl0NCz5Vz4p8kFBJ/EqTiTwF1Uh7ghdHuwAXhvgAFwZ8gBZFAB5/xMAhv8VAJD/FwCn/xoAof8eAK//IAC8/yIAwf8lANH/JwDT/ykyzYNIYcAG5WHABuc22XxQD/DrMg/62zIZ+sMzj24kjalPA+RfvkdLPf9VNkf/QjZQ/zQ2Xf8lN6lVAs+maAWdkPocN3e0bUs2OvTaMTH//zMz/PNmabt18PAUMv/qFTD/5BYv/9cXLfnFFyz/rh8p+JYnJ/h8MCX4Zjoj90Y+Ie4zRB72HEwb9AtVGPMAVRXyAF4T7wBgEAB3/w8Ah/8RAJz/EgCe/xUAsf8XALH/GgC//xwAxf8fAMn/IQDb/yNGx0xbYsAD7WDBCNcR6N0tDPPnKxL52ythoWFMp1EI1qtNAu2DiCZlQPpVMEX/QDBQ/zAweMEbQqxNAPKrUQHYm7AOSmechE0zNfvrMTH//zIz/fVbXcp47e0SK/nnEir/5hMo/90UJv/PHCX/th0j/5snIf+EMR/2ajUd9kw5G/Q1ShjzGFUV8g1eE/AAWhHuAGYP6wBiDQCA/wwAkv8OAJn/DwCl/xEArv8TALb/FQDF/xYAwv8ZAND/GwDT/x1OxjRiY78C8F7CDMMH8PgjDvjqJBX41iV9gkBYpVUKuqlPBNmlVQfEiYYaYXG2KD+MjBFbp1cDvKtNAeiqVAHDoJoKTkxlxm8xMf/9MTH//zEx//09Pe+7jY2NQfjwFiPK1BAwrswIPK3HCTuqwA05pLIOOLmfGij0bywX81U9FfJDQxPwHksR7xBQEO0ASQ7qAFUM5gBmCgBx/wkAmf8KAJX/DACS/w4Aqv8PAL//EADG/xIAzP8UAM7/FQDe/xdQwy9dYr8C72DBCccJ9vYdEO/eHxD3xyAw3Z8lU7tjMX6LM0upUATTq0wB7apOAeKtTQHrrUsA+ZiICk+MuRQzieUhJzQ59s8xMf//MTH//zEx//8yMv77NDT54GBnsWhuwwKiZsAA4mbAAOJmvwDiZr8A4me+AbzGjhwb8Fo8Ef9ERA/tJEkO6xRODegXRgvjAFUJ2wBJBwCZ/wUAkv8HAJ//CACi/wsAqv8MAMT/DQC7/w8Az/8QANL/EQDj/xJPxDRKYr8C6mLAA9ss4pkjFfTqGBT1zBkd/7oaJv+hG2awTy2pUQS9q08Czp5hCHmqUAHFrEwA5mv3IR9t20kjO0rkhjEx//8xMf//MTH//zEx//8xMf//MTH//z1A6qd0xAJwaL8As2jAALVnvwC0Z74AtG+6Anrhhy0R/1s3Dv9VQAzoLkYL/xxVCf8kSQf/AFUG/wBABACA/wIAgP8EAID/BgCf/wgAqv8JAMz/CgC//wwAxP8NANv/DgDd/w9AzFkoYr8C3mLAAulPyTJHDfLkExr/zBQY/7YVI/+XFkLZaBuScRdNhI4dNE7/QxeNiBI6oG4JVle2bSM4Rud/MTP98TEx//8xMf//MTH//zEx//8xMf//MjL/+lpW0Ef/4w4S/+EPEf/SDxH/vxAQ/6oiD/+dJw3/gCoM/3QuC/9VOQn/SUkH/ypVBv8AMwX/AIAC/wAAAQAAAAAA//8BAKr/AwC//wQAqv8GALb/BwC//wgAzP8KAOb/CgDU/wwR3d0PYMIGqmO/APtfxBCBG/KuExD/zxAe/7QRLf+WESr/gBI5/2MSR/9VEkPyQxNDno4iNU3iYDM2+sMxMv71MTH//zEx//8yMv7qOz/tfkdQ3VM8PPCJPz/rddfJNhP/3REP/9sSDv/YFA3/1BUM/7kXC/+ZGgr/jhwJ/20kB/9VKgb/MzMF/wBVA/8AAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wEAqv8DAL//BADM/wUA1P8GANv/BwDj/wkA5v8KVcYgP2O+APhivwLTUMowMBL/tg4k/6QOJP+SDjP/dw8z/2YPOIevIDI2+7wxMv/7MTH//zEx//8xMf//MTH//zEy/ulATORUu/8iD8j/Eg7Y/xQN6+sUDf/qFQz/6hUM/+gXC//MGgr/xhwJ/78gCP/UKgb/gCoG/4BABP9VVQP/AAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//AQD//wIA//8DAMz/BQDU/wYA//8GAN/fCGLABZVjvgD9YsEErEnbQBwX/6ILLv+iCy7/dAsq/2oMM0DwZDEx//8xMf//MTH//zEx//8xMf//MTH//zU4+IyS2zcOuf8XC7n/Fwvm/xoK5uYaCuPjHAn/3yAI/98gCP/bAAf/qgAG/8wABf+/AAT//wAC//8AAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8BAP//AQD//wIA//8DAP//BFjHICBjwAHBY74A/WLAA7ZSyx4iAP+SByT/bQcg/2AIN0/nKjIy/uwxMf//MTH//zEx//8xMf//MTH//zQ88maS/wAHkv8AB7b/AAfU/wAG1P8ABv//AAX/zAAF/78ABP//AAP/qgAD/4AAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABjwgA2Yr8A0mK/AP5kwADKY74AQ2G2ABVmzAAFAAAAAC0t/xEwMP9aMDD/zjEx//8xMf//MTH//zEx/4cAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZLwALmK+AKZivgD0Y78A92K+AL1ivwCMY78Ab2S+AFJqvwAMLy//JjEx/+UxMf//MTH/7i8v/2YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8CMjL/TDQ0/ycAAAAAAAAAAFu2AA5ivgBOYr4Aw2O/AP9jvwD+Y8AA+WO+AOFjvgBDAAAAADEx/0MxMf93MTH/Lxwc/wkAAAAAAAAAAK5LACytSQA4/wAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACoq/wYyMv9sMDD/8jEx/5gAAAAAAAAAAAAAAAAAAAAAAAAAAF68ACZgvgBiZMAAhWS+AH1ptAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAK5KAKGsSgDkqkoARYAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AjEx/20xMf/pMTH/sTMz/x4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKxIAC6tSgDHrUoA5K5IAFiqVQADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMDD/dTIy//IxMf+xLi7/HAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOVqyh3/AP8BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAKsSQAxrkoA2K1KAOirSABV/wAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQP8IMTH/vTIy/74xMf8fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5mzLU+Zsyunma8o+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAs0wAJa1JANGtSgCGtkkABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMTH/HzU1/xgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5W3LbOZsyu3nbMtJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKpKABiuRgAWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5W3LbOZsy+3ja8tKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA527Na+Zty+3kbclLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA52zKYeVsyuzmashGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA43HVEuVry1jud8wPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==" />
	<title>LED Settings</title>
	<script>
		var d=document,laprev=55,maxB=1,maxV=0,maxM=4000,maxPB=4096,maxL=1333,maxLbquot=0; //maximum bytes for LED allocation: 4kB for 8266, 32kB for 32
		d.um_p = [];
		d.rsvd = [];
		d.ro_gpio = [];
		d.max_gpio = 50;
		var customStarts=false,startsDirty=[],maxCOOverrides=5;
		var loc = false, locip, locproto = "http:";
		// function H(){window.open("https://kno.wled.ge/features/settings/#led-settings");}
		function B(){window.open(getURL("/settings"),"_self");}
		function gId(n){return d.getElementById(n);}
		function off(n){d.getElementsByName(n)[0].value = -1;}
		// https://www.educative.io/edpresso/how-to-dynamically-load-a-js-file-in-javascript
		function loadJS(FILE_URL, async = true) {
			let scE = d.createElement("script");
			scE.setAttribute("src", FILE_URL);
			scE.setAttribute("type", "text/javascript");
			scE.setAttribute("async", async);
			d.body.appendChild(scE);
			// success event 
			scE.addEventListener("load", () => {
				GetV();
				checkSi();
				setABL();
				d.Sf.addEventListener("submit", trySubmit);
				if (d.um_p[0]==-1) d.um_p.shift();
				pinDropdowns();
			});
			// error event
			scE.addEventListener("error", (ev) => {
				console.log("Error on loading file", ev);
				alert("Loading of configuration script failed.\nIncomplete page data!");
			});
		}
		var timeout;
		function showToast(text, error = false)
		{
			var x = gId("toast");
			x.innerHTML = text;
			x.className = error ? "error":"show";
			clearTimeout(timeout);
			x.style.animation = 'none';
			timeout = setTimeout(function(){ x.className = x.className.replace("show", ""); }, 2900);
		}
		function bLimits(b,v,p,m,l) {
			maxB = b; maxV = v; maxM = m; maxPB = p; maxL = l;
		}
		function pinsOK() {
			var LCs = d.Sf.querySelectorAll("#mLC input[name^=L]"); // input fields
			for (i=0; i<LCs.length; i++) {
				var nm = LCs[i].name.substring(0,2);
				// ignore IP address
				if (nm=="L0" || nm=="L1" || nm=="L2" || nm=="L3") {
					var n = LCs[i].name.substring(2);
					var t = parseInt(d.getElementsByName("LT"+n)[0].value, 10); // LED type SELECT
					if (t>=80) continue;
				}
				//check for pin conflicts
				if (nm=="L0" || nm=="L1" || nm=="L2" || nm=="L3" || nm=="L4"/* || nm=="RL" || nm=="BT" || nm=="IR"*/)
					if (LCs[i].value!="" && LCs[i].value!="-1") {
						var p = d.rsvd.concat(d.um_p); // used pin array
						d.Sf.querySelectorAll("select.pin").forEach((e)=>{if(e.value>-1)p.push(parseInt(e.value));}) // buttons, IR & relay
						if (p.some((e)=>e==parseInt(LCs[i].value))) {
							alert(`Sorry, pins ${JSON.stringify(p)} can't be used.`);
							LCs[i].value="";
							LCs[i].focus();
							return false;
						}
						else if (/*!(nm == "IR" || nm=="BT") &&*/ d.ro_gpio.some((e)=>e==parseInt(LCs[i].value))) {
							alert(`Sorry, pins ${JSON.stringify(d.ro_gpio)} are input only.`);
							LCs[i].value="";
							LCs[i].focus();
							return false;
						}
						for (j=i+1; j<LCs.length; j++) {
							var n2 = LCs[j].name.substring(0,2);
							if (n2=="L0" || n2=="L1" || n2=="L2" || n2=="L3" || n2=="L4"/* || n2=="RL" || n2=="BT" || n2=="IR"*/) {
								if (n2.substring(0,1)==="L") {
									var m  = LCs[j].name.substring(2);
									var t2 = parseInt(d.getElementsByName("LT"+m)[0].value, 10);
									if (t2>=80) continue;
								}
								if (LCs[j].value!="" && LCs[i].value==LCs[j].value) {
									alert(`Pin conflict between ${LCs[i].name}/${LCs[j].name}!`);
									LCs[j].value="";
									LCs[j].focus();
									return false;
								}
							}
						}
					}
			}
			return true;
		}
		function trySubmit(e) {
			d.Sf.data.value = '';
			e.preventDefault();
			if (!pinsOK()) {e.stopPropagation();return false;} // Prevent form submission and contact with server
			if (bquot > 100) {var msg = "Too many LEDs for me to handle!"; if (maxM < 10000) msg += "\n\rConsider using an ESP32."; alert(msg);}
			if (d.Sf.checkValidity()) d.Sf.submit(); //https://stackoverflow.com/q/37323914
		}
		function enABL()
		{
			var en = gId('able').checked;
			d.Sf.LA.value = (en) ? laprev:0;
			gId('abl').style.display = (en) ? 'inline':'none';
			gId('psu2').style.display = (en) ? 'inline':'none';
			if (d.Sf.LA.value > 0) setABL();
			UI();
		}
		function enLA()
		{
			var val = d.Sf.LAsel.value;
			d.Sf.LA.value = val;
			gId('LAdis').style.display = (val == 50) ? 'inline':'none';
			UI();
		}
		function setABL()
		{
			gId('able').checked = true;
			d.Sf.LAsel.value = 50;
			switch (parseInt(d.Sf.LA.value)) {
				case 0: gId('able').checked = false; enABL(); break;
				case 30: d.Sf.LAsel.value = 30; break;
				case 35: d.Sf.LAsel.value = 35; break;
				case 55: d.Sf.LAsel.value = 55; break;
				case 255: d.Sf.LAsel.value = 255; break;
				default: gId('LAdis').style.display = 'inline';
			}
			gId('m1').innerHTML = maxM;
		}
		//returns mem usage
		function getMem(t, n) {
			let len = parseInt(d.getElementsByName("LC"+n)[0].value);
			len += parseInt(d.getElementsByName("SL"+n)[0].value); // skipped LEDs are allocated too
			let dbl = 0;
			if (d.Sf.LD.checked) dbl = len * 4;	// double buffering
			if (t < 32) {
				if (t==26 || t==29) len *= 2; // 16 bit LEDs
				if (maxM < 10000 && d.getElementsByName("L0"+n)[0].value == 3) { //8266 DMA uses 5x the mem
					if (t > 28) return len*20 + dbl; //RGBW
					return len*15 + dbl;
				} else if (maxM >= 10000) //ESP32 RMT uses double buffer?
				{
					if (t > 28) return len*8 + dbl; //RGBW
					return len*6 + dbl;
				}
				if (t > 28) return len*4 + dbl; //RGBW
				return len*3 + dbl;
			}
			if (t > 31 && t < 48) return 5;	// analog
			return len*3 + dbl;
		}

		function UI(change=false)
		{
			let isRGBW = false, gRGBW = false, memu = 0;

			gId('ampwarning').style.display = (d.Sf.MA.value > 7200) ? 'inline':'none';

			if (d.Sf.LA.value == 255) laprev = 12;
			else if (d.Sf.LA.value > 0) laprev = d.Sf.LA.value;

			// enable/disable LED fields
			d.Sf.querySelectorAll("#mLC select[name^=LT]").forEach((s)=>{
				// is the field a LED type?
				var n = s.name.substring(2);
				var t = parseInt(s.value);
				gId("p0d"+n).innerHTML = (t>=80 && t<96) ? "IP address:" : (t > 49) ? "Data GPIO:" : (t > 41) ? "GPIOs:" : "GPIO:";
				gId("p1d"+n).innerHTML = (t> 49 && t<64) ? "Clk GPIO:" : "";
				//var LK = d.getElementsByName("L1"+n)[0]; // clock pin

				memu += getMem(t, n); // calc memory

				// enumerate pins
				for (p=1; p<5; p++) {
					var LK = d.getElementsByName("L"+p+n)[0]; // secondary pins
					if (!LK) continue;
					if (((t>=80 && t<96) && p<4) || (t>49 && p==1) || (t>41 && t < 50 && (p+40 < t))) // TYPE_xxxx values from const.h
					{
						// display pin field
						LK.style.display = "inline";
						LK.required = true;
					} else {
						// hide pin field
						LK.style.display = "none";
						LK.required = false;
						LK.value="";
					}
				}
				if (change) {
					gId("rf"+n).checked = (gId("rf"+n).checked || t == 31); // LEDs require data in off state
					if (t > 31 && t < 48) d.getElementsByName("LC"+n)[0].value = 1; // for sanity change analog count just to 1 LED
				}
				gId("rf"+n).onclick = (t == 31) ? (()=>{return false}) : (()=>{});  // prevent change for TM1814
				gRGBW |= isRGBW = ((t > 17 && t < 22) || (t > 28 && t < 32) || (t > 40 && t < 46 && t != 43) || t == 88); // RGBW checkbox, TYPE_xxxx values from const.h
				gId("co"+n).style.display = ((t >= 80 && t < 96) || (t >= 40 && t < 48)) ? "none":"inline";  // hide color order for PWM
				gId("dig"+n+"w").style.display = (t > 28 && t < 32) ? "inline":"none";  // show swap channels dropdown
				if (!(t > 28 && t < 32)) d.getElementsByName("WO"+n)[0].value = 0; // reset swapping
				gId("dig"+n+"c").style.display = (t >= 40 && t < 48) ? "none":"inline";  // hide count for analog
				gId("dig"+n+"r").style.display = (t >= 80 && t < 96) ? "none":"inline";  // hide reversed for virtual
				gId("dig"+n+"s").style.display = ((t >= 80 && t < 96) || (t >= 40 && t < 48)) ? "none":"inline";  // hide skip 1st for virtual & analog
				gId("dig"+n+"f").style.display = ((t >= 16 && t < 32) || (t >= 50 && t < 64)) ? "inline":"none";  // hide refresh
				gId("dig"+n+"a").style.display = (isRGBW && t != 40) ? "inline":"none";  // auto calculate white
				gId("dig"+n+"l").style.display = (t > 48 && t < 64) ? "inline":"none";  // bus clock speed
				gId("rev"+n).innerHTML = (t >= 40 && t < 48) ? "Inverted output":"Reversed (rotated 180°)";  // change reverse text for analog
				gId("psd"+n).innerHTML = (t >= 40 && t < 48) ? "Index:":"Start:";    // change analog start description
			});
			// display global white channel overrides
			gId("wc").style.display = (gRGBW) ? 'inline':'none';
			if (!gRGBW) {
				d.Sf.AW.selectedIndex = 0;
				d.Sf.CR.checked = false;
			}
			// check for pin conflicts
			var LCs = d.Sf.querySelectorAll("#mLC input[name^=L]"); // input fields
			var sLC = 0, sPC = 0, maxLC = 0;
			for (i=0; i<LCs.length; i++) {
				var nm = LCs[i].name.substring(0,2);  // field name
				var n  = LCs[i].name.substring(2);    // bus number
				// do we have a led count field
				if (nm=="LC") {
					var c=parseInt(LCs[i].value,10); //get LED count
					if (!customStarts || !startsDirty[n]) gId("ls"+n).value=sLC; //update start value
					gId("ls"+n).disabled = !customStarts; //enable/disable field editing
					if(c){
						var s = parseInt(gId("ls"+n).value); //start value
						if (s+c > sLC) sLC = s+c; //update total count
						if(c>maxLC)maxLC=c; //max per output
						var t = parseInt(d.getElementsByName("LT"+n)[0].value); // LED type SELECT
						if (t<80) sPC+=c; //virtual out busses do not count towards physical LEDs
					} // increase led count
					continue;
				}
				// do we have led pins for digital leds
				if (nm=="L0" || nm=="L1") {
					var lc=d.getElementsByName("LC"+n)[0];
					lc.max=maxPB; // update max led count value
				}
				// ignore IP address (stored in pins for virtual busses)
				if (nm=="L0" || nm=="L1" || nm=="L2" || nm=="L3") {
					var t = parseInt(d.getElementsByName("LT"+n)[0].value); // LED type SELECT
					if (t>=80) {
						LCs[i].max = 255;
						LCs[i].min = 0;
						LCs[i].style.color="#fff";
						continue; // do not check conflicts
					} else {
						LCs[i].max = d.max_gpio;
						LCs[i].min = -1;
					}
				}
				// check for pin conflicts
				if (nm=="L0" || nm=="L1" || nm=="L2" || nm=="L3" || nm=="L4"/* || nm=="RL" || nm=="BT" || nm=="IR"*/)
					if (LCs[i].value!="" && LCs[i].value!="-1") {
						var p = d.rsvd.concat(d.um_p); // used pin array
						d.Sf.querySelectorAll("select.pin").forEach((e)=>{if(e.value>-1)p.push(parseInt(e.value));}) // buttons, IR & relay
						for (j=0; j<LCs.length; j++) {
							if (i==j) continue;
							var n2 = LCs[j].name.substring(0,2);
							if (n2=="L0" || n2=="L1" || n2=="L2" || n2=="L3" || n2=="L4"/* || n2=="RL" || n2=="BT" || n2=="IR"*/) {
								if (n2.substring(0,1)==="L") {
									var m  = LCs[j].name.substring(2);
									var t2 = parseInt(d.getElementsByName("LT"+m)[0].value, 10);
									if (t2>=80) continue;
								}
								if (LCs[j].value!="" && LCs[j].value!="-1") p.push(parseInt(LCs[j].value,10));  // add current pin
							}
						}
						// now check for conflicts
						if (p.some((e)=>e==parseInt(LCs[i].value))) LCs[i].style.color="red"; else LCs[i].style.color=d.ro_gpio.some((e)=>e==parseInt(LCs[i].value))?"orange":"#fff";
					}
				// check buttons, IR & relay
				//if (nm=="IR" || nm=="BT" || nm=="RL") {
				//	LCs[i].max = d.max_gpio;
				//	LCs[i].min = -1;
				//}
			}
			// update total led count
			gId("lc").textContent = sLC;
			gId("pc").textContent = (sLC == sPC) ? "":"(" + sPC + " physical)";

			// memory usage and warnings
			gId('m0').innerHTML = memu;
			bquot = memu / maxM * 100;
			gId('dbar').style.background = `linear-gradient(90deg, ${bquot > 60 ? (bquot > 90 ? "red":"orange"):"#ccc"} 0 ${bquot}%, #444 ${bquot}% 100%)`;
			gId('ledwarning').style.display = (maxLC > Math.min(maxPB,800) || bquot > 80) ? 'inline':'none';
			gId('ledwarning').style.color = (maxLC > Math.max(maxPB,800) || bquot > 100) ? 'red':'orange';
			gId('wreason').innerHTML = (bquot > 80) ? "80% of max. LED memory" +(bquot>100 ? ` (<b>ERROR: Using over ${maxM}B!</b>)` : "") : "800 LEDs per output";
			// calculate power
			var val = Math.ceil((100 + sPC * laprev)/500)/2;
			val = (val > 5) ? Math.ceil(val) : val;
			var s = "";
			var is12V = (d.Sf.LAsel.value == 30);
			var isWS2815 = (d.Sf.LAsel.value == 255);
			if (val < 1.02 && !is12V && !isWS2815)
			{
				s = "ESP 5V pin with 1A USB supply";
			} else
			{
				s += is12V ? "12V ": isWS2815 ? "WS2815 12V " : "5V ";
				s += val;
				s += "A supply connected to LEDs";
			}
			var val2 = Math.ceil((100 + sPC * laprev)/1500)/2;
			val2 = (val2 > 5) ? Math.ceil(val2) : val2;
			var s2 = "(for most effects, ~";
			s2 += val2;
			s2 += "A is enough)<br>";
			gId('psu').innerHTML = s;
			gId('psu2').innerHTML = isWS2815 ? "" : s2;
			gId("json").style.display = d.Sf.IT.value==8 ? "" : "none";
		}
		function lastEnd(i) {
			if (i<1) return 0;
			v = parseInt(d.getElementsByName("LS"+(i-1))[0].value) + parseInt(d.getElementsByName("LC"+(i-1))[0].value);
			var t = parseInt(d.getElementsByName("LT"+(i-1))[0].value);
			if (t > 31 && t < 48) v = 1; //PWM busses
			if (isNaN(v)) return 0;
			return v;
		}
		function addLEDs(n,init=true)
		{
			var o = d.getElementsByClassName("iST");
			var i = o.length;

			if ((n==1 && i>=maxB+maxV) || (n==-1 && i==0)) return;

			var f = gId("mLC");
			if (n==1) {
// npm run build has trouble minimizing spaces inside string
				var cn = `<div class="iST">
<hr class="sml">
${i+1}:
<select name="LT${i}" onchange="UI(true)">${i>=maxB ? '' :
'<option value="22" selected>WS281x</option>\
<option value="30">SK6812/WS2814 RGBW</option>\
<option value="31">TM1814</option>\
<option value="24">400kHz</option>\
<option value="25">TM1829</option>\
<option value="26">UCS8903</option>\
<option value="29">UCS8904 RGBW</option>\
<option value="50">WS2801</option>\
<option value="51">APA102</option>\
<option value="52">LPD8806</option>\
<option value="54">LPD6803</option>\
<option value="53">P9813</option>\
<option value="19">WS2811 White</option>\
<option value="40">On/Off</option>\
<option value="41">PWM White</option>\
<option value="42">PWM CCT</option>\
<option value="43">PWM RGB</option>\
<option value="44">PWM RGBW</option>\
<option value="45">PWM RGB+CCT</option>\
<!--option value="46">PWM RGB+DCCT</option-->'}
<option value="80">DDP RGB (network)</option>
<!--option value="81">E1.31 RGB (network)</option-->
<option value="82">Art-Net RGB (network)</option>
<option value="88">DDP RGBW (network)</option>
</select><br>
<div id="co${i}" style="display:inline">Color Order:
<select name="CO${i}">
<option value="0">GRB</option>
<option value="1">RGB</option>
<option value="2">BRG</option>
<option value="3">RBG</option>
<option value="4">BGR</option>
<option value="5">GBR</option>
</select></div>
<div id="dig${i}w" style="display:none">Swap: <select name="WO${i}"><option value="0">None</option><option value="1">W & B</option><option value="2">W & G</option><option value="3">W & R</option></select></div>
<div id="dig${i}l" style="display:none">Clock: <select name="SP${i}"><option value="0">Slowest</option><option value="1">Slow</option><option value="2">Normal</option><option value="3">Fast</option><option value="4">Fastest</option></select></div>
<div>
<span id="psd${i}">Start:</span> <input type="number" name="LS${i}" id="ls${i}" class="l starts" min="0" max="8191" value="${lastEnd(i)}" oninput="startsDirty[${i}]=true;UI();" required />&nbsp;
<div id="dig${i}c" style="display:inline">Length: <input type="number" name="LC${i}" class="l" min="1" max="${maxPB}" value="1" required oninput="UI()" /></div><br>
</div>
<span id="p0d${i}">GPIO:</span><input type="number" name="L0${i}" required class="s" onchange="UI();pinUpd(this);"/>
<span id="p1d${i}"></span><input type="number" name="L1${i}" class="s" onchange="UI();pinUpd(this);"/>
<span id="p2d${i}"></span><input type="number" name="L2${i}" class="s" onchange="UI();pinUpd(this);"/>
<span id="p3d${i}"></span><input type="number" name="L3${i}" class="s" onchange="UI();pinUpd(this);"/>
<span id="p4d${i}"></span><input type="number" name="L4${i}" class="s" onchange="UI();pinUpd(this);"/>
<div id="dig${i}r" style="display:inline"><br><span id="rev${i}">Reversed</span>: <input type="checkbox" name="CV${i}"></div>
<div id="dig${i}s" style="display:inline"><br>Skip first LEDs: <input type="number" name="SL${i}" min="0" max="255" value="0" oninput="UI()"></div>
<div id="dig${i}f" style="display:inline"><br>Off Refresh: <input id="rf${i}" type="checkbox" name="RF${i}"></div>
<div id="dig${i}a" style="display:inline"><br>Auto-calculate white channel from RGB:<br><select name="AW${i}"><option value=0>None</option><option value=1>Brighter</option><option value=2>Accurate</option><option value=3>Dual</option><option value=4>Max</option></select>&nbsp;</div>
</div>`;
				f.insertAdjacentHTML("beforeend", cn);
			}
			if (n==-1) {
				o[--i].remove();--i;
			}

			gId("+").style.display = (i<maxB+maxV-1) ? "inline":"none";
			gId("-").style.display = (i>0) ? "inline":"none";

			if (!init) UI();
		}

		function addCOM(start=0,len=1,co=0) {
			var i = d.getElementsByClassName("com_entry").length;
			if (i >= 10) return;

			var b = `<div class="com_entry">
<hr class="sml">
${i+1}: Start: <input type="number" name="XS${i}" id="xs${i}" class="l starts" min="0" max="65535" value="${start}" oninput="UI();" required="">&nbsp;
Length: <input type="number" name="XC${i}" id="xc${i}" class="l" min="1" max="65535" value="${len}" required="" oninput="UI()">
<div style="display:inline">Color Order:
<select id="xo${i}" name="XO${i}">
<option value="0">GRB</option>
<option value="1">RGB</option>
<option value="2">BRG</option>
<option value="3">RBG</option>
<option value="4">BGR</option>
<option value="5">GBR</option>
</select>
</div><br></div>`;
			gId("com_entries").insertAdjacentHTML("beforeend", b);
			gId("xo"+i).value = co;
			btnCOM(i+1);
			UI();
		}

		function remCOM() {
			var entries = d.getElementsByClassName("com_entry");
			var i = entries.length;
			if (i === 0) return;
			entries[i-1].remove();
			btnCOM(i-1);
			UI();
		}

		function resetCOM(_newMaxCOOverrides=undefined) {
			if (_newMaxCOOverrides) {
				maxCOOverrides = _newMaxCOOverrides;
			}
			for (let e of d.getElementsByClassName("com_entry")) {
				e.remove();
			}
			btnCOM(0);
		}

		function btnCOM(i) {
			gId("com_add").style.display = (i<maxCOOverrides) ? "inline":"none";
			gId("com_rem").style.display = (i>0) ? "inline":"none";
		}

		function addBtn(i,p,t) {
			var c = gId("btns").innerHTML;
			var bt = "BT" + String.fromCharCode((i<10?48:55)+i);
			var be = "BE" + String.fromCharCode((i<10?48:55)+i);
			c += `Button ${i} GPIO: <input type="number" name="${bt}" onchange="UI()" class="xs" value="${p}">`;
			c += `&nbsp;<select name="${be}">`
			c += `<option value="0" ${t==0?"selected":""}>Disabled</option>`;
			c += `<option value="2" ${t==2?"selected":""}>Pushbutton</option>`;
			c += `<option value="3" ${t==3?"selected":""}>Push inverted</option>`;
			c += `<option value="4" ${t==4?"selected":""}>Switch</option>`;
			c += `<option value="5" ${t==5?"selected":""}>PIR sensor</option>`;
			c += `<option value="6" ${t==6?"selected":""}>Touch</option>`;
			c += `<option value="7" ${t==7?"selected":""}>Analog</option>`;
			c += `<option value="8" ${t==8?"selected":""}>Analog inverted</option>`;
			c += `</select>`;
			c += `<span style="cursor: pointer;" onclick="off('${bt}')">&nbsp;&#x2715;</span><br>`;
			gId("btns").innerHTML = c;
		}
		function tglSi(cs) {
			customStarts = cs;
			if (!customStarts) startsDirty = []; //set all starts to clean
			UI();
		}
		function checkSi() { //on load, checks whether there are custom start fields
			var cs = false;
			for (var i=1; i < d.getElementsByClassName("iST").length; i++) {
				var v = parseInt(gId("ls"+(i-1)).value) + parseInt(d.getElementsByName("LC"+(i-1))[0].value);
				if (v != parseInt(gId("ls"+i).value)) {cs = true; startsDirty[i] = true;}
			}
			if (gId("ls0") && parseInt(gId("ls0").value) != 0) {cs = true; startsDirty[0] = true;}
			gId("si").checked = cs;
			tglSi(cs);
		}
		function uploadFile(name) {
			var req = new XMLHttpRequest();
			req.addEventListener('load', function(){showToast(this.responseText,this.status >= 400)});
			req.addEventListener('error', function(e){showToast(e.stack,true);});
			req.open("POST", "/upload");
			var formData = new FormData();
			formData.append("data", d.Sf.data.files[0], name);
			req.send(formData);
			d.Sf.data.value = '';
			return false;
		}
		// https://stackoverflow.com/questions/7346563/loading-local-json-file
		function loadCfg(o) {
			var f, fr;

			if (typeof window.FileReader !== 'function') {
				alert("The file API isn't supported on this browser yet.");
				return;
			}

			if (!o.files) {
				alert("This browser doesn't support the `files` property of file inputs.");
			} else if (!o.files[0]) {
				alert("Please select a JSON file first!");
			} else {
				f = o.files[0];
				fr = new FileReader();
				fr.onload = receivedText;
				fr.readAsText(f);
			}
			o.value = '';

			function receivedText(e) {
				let lines = e.target.result;
				var c = JSON.parse(lines); 
				if (c.hw) {
					if (c.hw.led) {
						for (var i=0; i<10; i++) addLEDs(-1);
						var l = c.hw.led;
						l.ins.forEach((v,i,a)=>{
							addLEDs(1);
							for (var j=0; j<v.pin.length; j++) d.getElementsByName(`L${j}${i}`)[0].value = v.pin[j];
							d.getElementsByName("LT"+i)[0].value = v.type;
							d.getElementsByName("LS"+i)[0].value = v.start;
							d.getElementsByName("LC"+i)[0].value = v.len;
							d.getElementsByName("CO"+i)[0].value = v.order;
							d.getElementsByName("SL"+i)[0].value = v.skip;
							d.getElementsByName("RF"+i)[0].checked = v.ref;
							d.getElementsByName("CV"+i)[0].checked = v.rev;
						});
					}
					if(c.hw.com) {
						resetCOM();
						c.hw.com.forEach(e => {
							addCOM(e.start, e.len, e.order);
						});
					}
					if (c.hw.btn) {
						var b = c.hw.btn;
						if (Array.isArray(b.ins)) gId("btns").innerHTML = "";
						b.ins.forEach((v,i,a)=>{
							addBtn(i,v.pin[0],v.type);
						});
						d.getElementsByName("TT")[0].value = b.tt;
					}
					if (c.hw.ir) {
						d.getElementsByName("IR")[0].value = c.hw.ir.pin;
						d.getElementsByName("IT")[0].value = c.hw.ir.type;
					}
					if (c.hw.relay) {
						d.getElementsByName("RL")[0].value = c.hw.relay.pin;
						d.getElementsByName("RM")[0].checked = c.hw.relay.inv;
					}
					UI();
				}
			}
		}
		function pinDropdowns() {
			let fields = ["IR","RL"]; // IR & relay
			gId("btns").querySelectorAll('input[type="number"]').forEach((e)=>{fields.push(e.name);}) // buttons
			for (let i of d.Sf.elements) {
				if (i.type === "number" && fields.includes(i.name)) { //select all pin select elements
					let v = parseInt(i.value);
					let sel = addDropdown(i.name,0);
					for (var j = -1; j <= d.max_gpio; j++) {
						if (d.rsvd.includes(j)) continue;
						let foundPin = d.um_p.indexOf(j);
						let txt = (j === -1) ? "unused" : `${j}`;
						if (foundPin >= 0 && j !== v) txt += ` used`; // already reserved pin
						if (d.ro_gpio.includes(j)) txt += " (R/O)";
						let opt = addOption(sel, txt, j);
						if (j === v) opt.selected = true; // this is "our" pin
						else if (d.um_p.includes(j)) opt.disabled = true; // someone else's pin
					}
				}
			}
			// update select options
			d.Sf.querySelectorAll("select.pin").forEach((e)=>{pinUpd(e);});
			// add dataset values for LED GPIO pins
			d.Sf.querySelectorAll(".iST input.s[name^=L]").forEach((i)=>{
				if (i.value!=="" && i.value>=0)
					i.dataset.val = i.value;
			});
		}
		function pinUpd(e) {
			// update changed select options across all usermods
			let oldV = parseInt(e.dataset.val);
			e.dataset.val = e.value;
			let txt = e.name;
			let pins = [];
			d.Sf.querySelectorAll(".iST input.s[name^=L]").forEach((i)=>{
				if (i.value!=="" && i.value>=0 && i.max<255)
					pins.push(i.value);
			});
			let selects = d.Sf.querySelectorAll("select.pin");
			for (let sel of selects) {
				if (sel == e) continue
				Array.from(sel.options).forEach((i)=>{
					let led = pins.includes(i.value);
					if (!(i.value==oldV || i.value==e.value || led)) return;
					if (i.value == -1) {
						i.text = "unused";
						return
					}
					i.text = i.value;
					if (i.value==oldV) {
						i.disabled = false;
					}
					if (i.value==e.value || led) {
						i.disabled = true;
						i.text += ` ${led?'LED':txt}`;
					}
					if (d.ro_gpio.includes(parseInt(i.value))) i.text += " (R/O)";
				});
			}
		}
		// https://stackoverflow.com/questions/39729741/javascript-change-input-text-to-select-option
		function addDropdown(field) {
			let sel = d.createElement('select');
			sel.classList.add("pin");
			let inp = d.getElementsByName(field)[0];
			if (inp && inp.tagName === "INPUT" && (inp.type === "text" || inp.type === "number")) {  // may also use nodeName
				let v = inp.value;
				let n = inp.name;
				// copy the existing input element's attributes to the new select element
				for (var i = 0; i < inp.attributes.length; ++ i) {
					var att = inp.attributes[i];
					// type and value don't apply, so skip them
					// ** you might also want to skip style, or others -- modify as needed **
					if (att.name != 'type' && att.name != 'value' && att.name != 'class' && att.name != 'style') {
						sel.setAttribute(att.name, att.value);
					}
				}
				sel.setAttribute("data-val", v);
				sel.setAttribute("onchange", "pinUpd(this)");
				// finally, replace the old input element with the new select element
				inp.parentElement.replaceChild(sel, inp);
				return sel;
			}
			return null;
		}
		function addOption(sel,txt,val) {
			if (sel===null) return; // select object missing
			let opt = d.createElement("option");
			opt.value = val;
			opt.text = txt;
			sel.appendChild(opt);
			for (let i=0; i<sel.childNodes.length; i++) {
				let c = sel.childNodes[i];
				if (c.value == sel.dataset.val) sel.selectedIndex = i;
			}
			return opt;
		}
		function S() {
			let l = window.location;
			if (l.protocol == "file:") {
				loc = true;
				locip = localStorage.getItem('locIp');
				if (!locip) {
					locip = prompt("File Mode. Please enter ARGB IP!");
					localStorage.setItem('locIp', locip);
				}
			} else {
				// detect reverse proxy
				let path = l.pathname;
				let paths = path.slice(1,path.endsWith('/')?-1:undefined).split("/");
				if (paths.length > 2) {
					locproto = l.protocol;
					loc = true;
					locip = l.hostname + (l.port ? ":" + l.port : "") + "/" + paths[0];
				}
			}
			loadJS(getURL('/settings/s.js?p=2'), false);	// If we set async false, file is loaded and executed, then next statement is processed
			if (loc) d.Sf.action = getURL('/settings/leds');
		}
		function getURL(path) {
			return (loc ? locproto + "//" + locip : "") + path;
		}
	</script>
	<style>@import url("style.css");</style>
</head>
<body onload="S()">
	<form id="form_s" name="Sf" method="post">
		<div class="toprow">
		<!-- <div class="helpB"><button type="button" onclick="H()">?</button></div> -->
		<button type="button" onclick="B()">↩️Quay về</button><button type="submit">✅Lưu cài đặt</button><hr>
		</div>
		<h2>LED &amp; Cấu hình phần cứng</h2>
		Tổng số LEDs: <span id="lc">?</span> <span id="pc"></span><br>
		<i>Nguồn điện đề nghị cho màu trắng sáng nhất:</i><br>
		<b><span id="psu">?</span></b><br>
		<span id="psu2"><br></span>
		<br>
		Bật giới hạn độ sáng tự động: <input type="checkbox" name="ABen" onchange="enABL()" id="able"><br>
		<div id="abl">
			Maximum Current: <input name="MA" type="number" class="l" min="250" max="65000" oninput="UI()" required> mA<br>
			<div id="ampwarning" class="warn" style="display: none;">
				&#9888; Your power supply provides high current.<br>
				To improve the safety of your setup,<br>
				please use thick cables,<br>
				multiple power injection points and a fuse!<br>
			</div>
			<i>Tự động giới hạn độ sáng để ở gần mức giới hạn.<br>
			Keep at &lt;1A if powering LEDs directly from the ESP 5V pin!<br>
			Nếu bạn đang sử dụng nguồn điện bên ngoài, hãy nhập định mức của nó.<br>
			(Mức sử dụng ước tính hiện tại: <span class="pow">unknown</span>)</i><br><br>
			LED voltage (Max. current for a single LED):<br>
			<select name="LAsel" onchange="enLA()">
				<option value="55" selected>5V default (55mA)</option>
				<option value="35">5V efficient (35mA)</option>
				<option value="30">12V (30mA)</option>
				<option value="255">WS2815 (12mA)</option>
				<option value="50">Custom</option>
			</select><br>
			<span id="LAdis" style="display: none;">Custom max. current per LED: <input name="LA" type="number" min="0" max="255" id="la" oninput="UI()" required> mA<br></span>
			<i>Giữ ở chế độ mặc định nếu bạn không chắc chắn về loại đèn LED của mình.</i><br>
		</div>

		<hr>
		<h3>Hardware setup</h3>
		<div id="mLC">LED outputs:</div>
		<hr class="sml">
		<button type="button" id="+" onclick="addLEDs(1,false)">+</button>
		<button type="button" id="-" onclick="addLEDs(-1,false)">-</button><br>
		LED Memory Usage: <span id="m0">0</span> / <span id="m1">?</span> B<br>
		<div id="dbar" style="display:inline-block; width: 100px; height: 10px; border-radius: 20px;"></div><br>
		<div id="ledwarning" class="warn" style="display: none;">
			&#9888; You might run into stability or lag issues.<br>
			Use less than <span id="wreason">800 LEDs per output</span> for the best experience!<br>
		</div>
		<hr class="sml">
		Make a segment for each output: <input type="checkbox" name="MS"><br>
		Custom bus start indices: <input type="checkbox" onchange="tglSi(this.checked)" id="si"><br>
		Use global LED buffer: <input type="checkbox" name="LD" onchange="UI()"><br>
		<hr class="sml">
		<div id="color_order_mapping">
			Color Order Override:
			<div id="com_entries"></div>
			<hr class="sml">
			<button type="button" id="com_add" onclick="addCOM()">+</button>
			<button type="button" id="com_rem" onclick="remCOM()">-</button><br>
		</div>
		<hr class="sml">
		<div id="btns"></div>
		Disable internal pull-up/down: <input type="checkbox" name="IP"><br>
		Touch threshold: <input type="number" class="s" min="0" max="100" name="TT" required><br>
		IR GPIO: <input type="number" min="-1" max="48" name="IR" onchange="UI()" class="xs"><select name="IT" onchange="UI()">
		<option value=0>Remote disabled</option>
		<option value=1>24-key RGB</option>
		<option value=2>24-key with CT</option>
		<option value=3>40-key blue</option>
		<option value=4>44-key RGB</option>
		<option value=5>21-key RGB</option>
		<option value=6>6-key black</option>
		<option value=7>9-key red</option>
		<option value=8>JSON remote</option>
		</select><span style="cursor: pointer;" onclick="off('IR')">&nbsp;&#x2715;</span><br>
		Apply IR change to main segment only: <input type="checkbox" name="MSO"><br>
		<div id="json" style="display:none;">JSON file: <input type="file" name="data" accept=".json"><button type="button" class="sml" onclick="uploadFile('/ir.json')">Upload</button><br></div>
		<!-- <a href="https://kno.wled.ge/interfaces/infrared/" target="_blank">IR info</a><br> -->
		Relay GPIO: <input type="number" min="-1" max="48" name="RL" onchange="UI()" class="xs"> Invert <input type="checkbox" name="RM"><span style="cursor: pointer;" onclick="off('RL')">&nbsp;&#x2715;</span><br>
		
		<hr>
		<h3>Defaults</h3>
		Mở đèn sau khi khởi động hoặc mở nguồn: <input type="checkbox" name="BO"><br>
		Độ sáng mặc định: <input name="CA" type="number" class="m" min="0" max="255" required> (0-255)<br><br>
		Apply preset <input name="BP" type="number" class="m" min="0" max="250" required> at boot (0 uses defaults)
		<br><br>
		Use Gamma correction for color: <input type="checkbox" name="GC"> (strongly recommended)<br>
		Use Gamma correction for brightness: <input type="checkbox" name="GB"> (not recommended)<br>
		Use Gamma value: <input name="GV" type="number" class="m" placeholder="2.8" min="1" max="3" step="0.1" required><br><br>
		Brightness factor: <input name="BF" type="number" class="m" min="1" max="255" required> %
		
		<hr>
		<h3>Transitions</h3>
		Crossfade: <input type="checkbox" name="TF"><br>
		Effect blending: <input type="checkbox" name="EB"><br>
		Transition Time: <input name="TD" type="number" class="xl" min="0" max="65500"> ms<br>
		Enable Palette transitions: <input type="checkbox" name="PF"><br>
		<i>Random Cycle</i> Palette Time: <input name="TP" type="number" class="m" min="1" max="255"> s<br>

		<hr>
		<h3>Timed light</h3>
		Default Duration: <input name="TL" type="number" class="m" min="1" max="255" required> min<br>
		Default Target brightness: <input name="TB" type="number" class="m" min="0" max="255" required><br>
		Mode:
		<select name="TW">
			<option value="0">Wait and set</option>
			<option value="1">Fade</option>
			<option value="2">Fade Color</option>
			<option value="3">Sunrise</option>
		</select>

		<hr>
		<h3>White management</h3>
		White Balance correction: <input type="checkbox" name="CCT"><br>
		<div id="wc">
			Global override for Auto-calculate white:<br>
			<select name="AW">
				<option value=255>Disabled</option>
				<option value=0>None</option>
				<option value=1>Brighter</option>
				<option value=2>Accurate</option>
				<option value=3>Dual</option>
				<option value=4>Max</option>
			</select>
			<br>
			Calculate CCT from RGB: <input type="checkbox" name="CR"><br>
			CCT additive blending: <input type="number" class="s" min="0" max="100" name="CB" required> %
		</div>
		<h3>Advanced</h3>
		Palette blending:
		<select name="PB">
			<option value="0">Linear (wrap if moving)</option>
			<option value="1">Linear (always wrap)</option>
			<option value="2">Linear (never wrap)</option>
			<option value="3">None (not recommended)</option>
		</select><br>
		Target refresh rate: <input type="number" class="s" min="1" max="120" name="FR" required> FPS
		<hr class="sml">
		<div id="cfg">Config template: <input type="file" name="data2" accept=".json"><button type="button" class="sml" onclick="loadCfg(d.Sf.data2)">Apply</button><br></div>
		<hr>
		<button type="button" onclick="B()">↩️Quay về</button><button type="submit">✅Lưu cài đặt</button>
	</form>
	<div id="toast"></div>
</body>
</html>
